---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

import MainHero from "../components/MainHero.astro";
import ImageRow from "../components/ImageRow.astro";
import { ViewTransitions } from "astro:transitions";
import BaseHead from "../components/BaseHead.astro";
import { SITE, ANCHORTAGS } from "../config";
import ShinyButton from "../components/ShinyButton.astro";

const { title } = SITE;
const description = "Simon Zhang is just practicing design";

// Data Fetching: List all Markdown posts in the repo.

const allPosts = (
  await getCollection("work", ({ data }) => {
    return data.archive !== true;
  })
).sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---
<head>
  <ViewTransitions   fallback="none" />
  <BaseHead {title} {description} />
  
</head>
<Layout>
  <MainHero />
  <section class='flex flex-col items-center px-2 mt-[15vh]' >
    
    <p class="text-center">
      Graphic designer and Web developer <a href="/after-hours">in the evening</a>
    </p>
  </section>

  <section
    aria-label='Blog post list'
    class='flex flex-col items-center mt-12 '
    id='work'
  >
    {allPosts?.map((post, index) => 
      <a class="group link-clear" href={`/work/${post.slug}`} >

    <article class='w-full px-3 py-8 bg-theme-light text-theme-dark' style=`--c-light: ${post.data.colors.bg}; --c-dark: ${post.data.colors.fg} `  >
      <header>
        <h1 class='text-center pb-4 '>
          <span class='block'>Case Study {index}:</span>
          <span class='block text-4xl md:text-5xl group-hover:underline' transition:name={"title:"+post.slug}>{post.data.title}</span>
        </h1>
      </header>
      <ImageRow images={post.data.heroImages}  slug={post.slug} class="" />
      <footer class='flex justify-between flex-col md:flex-row mt-2 gap-2 leading-tight'>
        <p class='text-sm md:text-base max-w-md flex-shrink'>{post.data.description}</p>
        <ShinyButton height="4em" width="13em" color={post.data.colors.fg} class='self-center min-w-[7em]'>
           <span class="text-theme-light text-center">View Full Case Study</span>
        </ShinyButton>
      </footer>
    </article>          
    </a>
)}
  </section>
  <section id="about" class='px-2 my-10 grid grid-cols-1 lg:grid-cols-2 '>
    <div class="lg:col-start-2">
      <p class='text-3xl lg:text-4xl indent-[3em] max-w-2xl'>
        simon zhang is a cross-disciplinary designer based in ATL & SEA â€”
        netscape-oriented with a windows aero slant. creating intimacy between
        physical and digital products. <span>    
          <button data-contact class="psuedo-link">lets connect <3</button>
        </span>
      </p>
      <div class='grid grid-cols-2 gap-y-2 gap-x-1 mt-6 max-w-2xl'>
        <p>
          Listening To: <br /> Five Years of Work and We Built That Song by
          Newfound Interest in Connecticut
        </p>
        <p>Reading right now: <br />CAPS LOCK by Ruben Pater</p>  
        <p>See how this site was built ðŸ‘€<br /> 
          <a href="https://github.com/codelastnight/portfolio2">
          Source Code on Github
        </a>
      </p>
    </div>
    
    </div>
  </section>
</Layout>

<style lang="postcss">
  .psuedo-link {
    @apply underline hover:bg-theme-dark hover:text-theme-light;
  }
</style>